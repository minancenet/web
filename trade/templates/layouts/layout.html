<!DOCTYPE html>
<html>
  <head>
    {% include "layouts/head.html" %}
    {% block head %} {% endblock head %}
  </head>
  <body>
    <header>
      {% include "layouts/header.html" %}
      {% block header %} {% endblock header %}
    </header>
    <main>
      <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">   
          <span class="close">&times;</span>
          <div class="modal-content-inner">
            <div class="row auth-headers">
              <div class="col-6">
                <h5 onclick="openCity(event, 'register')" class="tablinks active">Create Account</h5>
              </div>
              <div class="col-6">
                <h5 onclick="openCity(event, 'login')" class="tablinks">Sign in</h5>
              </div>
            </div>  
            <div id="register" class="tabcontent" style="display: block;">
              <hr style="width: 80%;">
              <p class="auth-text">Create an account to gain access to dozens of free features</p>
              <form method="POST" action="{{ url_for('auth.register') }}" class="auth-form">
                {{ registrationForm.hidden_tag() }}
                {% if registrationForm.username.errors %}
                  {{ registrationForm.username(class="auth-field invalid", placeholder="Username") }}
                  <div class="invalid-feedback">
                      {% for error in registrationForm.username.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ registrationForm.username(class="auth-field", placeholder="Username") }}
                {% endif %}

                {% if registrationForm.email.errors %}
                  {{ registrationForm.email(class="auth-field invalid", placeholder="Email") }}
                  <div class="invalid-feedback">
                      {% for error in registrationForm.email.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ registrationForm.email(class="auth-field", placeholder="Email") }}
                {% endif %}

                {% if registrationForm.password.errors %}
                  {{ registrationForm.password(class="auth-field invalid", placeholder="Password") }}
                  <div class="invalid-feedback">
                      {% for error in registrationForm.password.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ registrationForm.password(class="auth-field", placeholder="Password") }}
                {% endif %}

                {% if registrationForm.submit.errors %}
                  {{ registrationForm.submit(class="auth-field invalid") }}
                  <div class="invalid-feedback">
                      {% for error in registrationForm.submit.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ registrationForm.submit(class="auth-button") }}
                {% endif %}              
              </form>
            </div>
            
            <div id="login" class="tabcontent" style="display: none;">
              <hr style="width: 80%;">
              <form method="POST" action="{{ url_for('auth.login') }}" class="auth-form">
                {{ loginForm.hidden_tag() }}
                {% if loginForm.username.errors %}
                  {{ loginForm.username(class="auth-field invalid", placeholder="Username") }}
                  <div class="invalid-feedback">
                      {% for error in loginForm.username.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ loginForm.username(class="auth-field", placeholder="Username") }}
                {% endif %}
                
                {% if loginForm.password.errors %}
                  {{ loginForm.password(class="auth-field invalid", placeholder="Password") }}
                  <div class="invalid-feedback">
                      {% for error in loginForm.password.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ loginForm.password(class="auth-field", placeholder="Password") }}
                {% endif %}

                {% if loginForm.submit.errors %}
                  {{ loginForm.submit(class="auth-field invalid") }}
                  <div class="invalid-feedback">
                      {% for error in loginForm.submit.errors %}
                        <span>{{ error }}</span>
                      {% endfor %}
                  </div>
                {% else %}
                  {{ loginForm.submit(class="auth-button") }}
                {% endif %}
                <p class="auth-bottom"><a href="#">Forgot Password</a></p>
              </form>
            </div>
          </div> 
        </div>
      </div>
      <div class="main-wrapper bg">
        {% block content %}
        {% endblock content %}
      </div>
    </main>
    <footer>
      {% include "layouts/footer.html" %}
      {% block footer %} {% endblock footer %}
    </footer>
  </body>
  <script>
    // Get the modal
    var modal = document.getElementById("myModal");
    
    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");
    
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];
    
    // When the user clicks the button, open the modal 
    btn.onclick = function() {
      modal.style.display = "block";
    }
    
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
</html>